// Code generated by templ - DO NOT EDIT.

// templ: version: v0.2.771
package views

//lint:file-ignore SA4006 This context is only used if a nested component is present.

import "github.com/a-h/templ"
import templruntime "github.com/a-h/templ/runtime"

import "github.com/cterence/dead-drop/views/components"

func GetDrop() templ.Component {
	return templruntime.GeneratedTemplate(func(templ_7745c5c3_Input templruntime.GeneratedComponentInput) (templ_7745c5c3_Err error) {
		templ_7745c5c3_W, ctx := templ_7745c5c3_Input.Writer, templ_7745c5c3_Input.Context
		templ_7745c5c3_Buffer, templ_7745c5c3_IsBuffer := templruntime.GetBuffer(templ_7745c5c3_W)
		if !templ_7745c5c3_IsBuffer {
			defer func() {
				templ_7745c5c3_BufErr := templruntime.ReleaseBuffer(templ_7745c5c3_Buffer)
				if templ_7745c5c3_Err == nil {
					templ_7745c5c3_Err = templ_7745c5c3_BufErr
				}
			}()
		}
		ctx = templ.InitializeContext(ctx)
		templ_7745c5c3_Var1 := templ.GetChildren(ctx)
		if templ_7745c5c3_Var1 == nil {
			templ_7745c5c3_Var1 = templ.NopComponent
		}
		ctx = templ.ClearChildren(ctx)
		_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString("<!doctype html><html lang=\"en\" class=\"text-gray-900 antialiased leading-tight\">")
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		templ_7745c5c3_Err = components.Header().Render(ctx, templ_7745c5c3_Buffer)
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString("<body class=\"min-h-screen bg-gray-100 p-4\"><div class=\"md:container md:mx-auto\">")
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		templ_7745c5c3_Err = components.Title().Render(ctx, templ_7745c5c3_Buffer)
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString("<h2 class=\"text-xl my-4 text-gray-600\">enter the password to retrieve your drop.</h2><form><input class=\"transition-opacity duration-500 shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline\" id=\"key\" type=\"password\" placeholder=\"password.\"> <button id=\"getDataButton\" class=\"transition-opacity duration-500 bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline my-4\" type=\"button\" hx-trigger=\"click\" hx-swap=\"textContent\" hx-target=\"#encrypted-data\" hx-on::after-request=\"decrypt()\">get drop.</button></form><div id=\"encrypted-data\" class=\"hidden\"></div><textarea disabled class=\"opacity-0 transition-opacity ease-in duration-500 font-mono shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline h-36 bg-white\" id=\"data\" type=\"text\" placeholder=\"secret data.\"></textarea><script>\n          const dropId = window.location.href.split(\"/\").pop()\n          const getDataButton = document.getElementById(\"getDataButton\")\n          getDataButton.setAttribute(\"hx-get\", \"/drop/get/\" + dropId)\n\n          function decrypt() {\n            const encryptedData = document.getElementById(\"encrypted-data\").innerHTML\n\t\t\t\t\t\tconst keyElement = document.getElementById(\"key\")\n            const key = keyElement.value\n\t\t\t\t\t\tlet data = \"\"\n\t\t\t\t\t\ttry {\n\t            data = sjcl.decrypt(key.trim(), encryptedData)\n\t\t\t\t\t\t}\n\t\t\t\t\t\tcatch (e) {\n\t\t\t\t\t\t\tconst data = \"error: \" + e.message\n\t\t\t\t\t\t\tconsole.error(e)\n\t\t\t\t\t\t\talert(\"error during decryption. please check the password and try again.\")\n\t\t\t\t\t\t\treturn\n\t\t\t\t\t\t}\n            document.getElementById(\"data\").innerHTML = data\n\n\t\t\t\t\t\tdocument.getElementById(\"encrypted-data\").innerHTML = \"\"\n\t\t\t\t\t\t// set visbility hidden for the encrypted data\n\t\t\t\t\t\tkeyElement.classList.add(\"opacity-0\")\n\t\t\t\t\t\tgetDataButton.classList.add(\"opacity-0\")\n\t\t\t\t\t\t// use transition to show the data\n\t\t\t\t\t\tdocument.getElementById(\"data\").classList.add(\"-translate-y-[6.7rem]\")\n\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\tdocument.getElementById(\"data\").classList.remove(\"opacity-0\")\n\t\t\t\t\t\t}, 500)\n          }\n        </script></div>")
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		templ_7745c5c3_Err = components.Footer().Render(ctx, templ_7745c5c3_Buffer)
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString("</body></html>")
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		return templ_7745c5c3_Err
	})
}

var _ = templruntime.GeneratedTemplate
